<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>デカブサ占い</title>

  <style>
    :root{
      --bg:#f6f6f6;
      --card:#ffffff;
      --line:#e9e9e9;
      --text:#111;
      --muted:#666;
      --muted2:#9a9a9a;
      --accent:#ffd400;

      --maxw:520px;
      --pad:22px;
      --btn-h:56px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN",
                   "Noto Sans JP", "Yu Gothic", sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x:hidden;
    }

    /* ====== 背景粒子（薄い、上品） ====== */
    .bgParticles{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      opacity:.65;
      background:
        radial-gradient(circle at 12% 18%, rgba(0,0,0,0.06) 1px, transparent 2px) 0 0 / 26px 26px,
        radial-gradient(circle at 72% 62%, rgba(0,0,0,0.05) 1px, transparent 2px) 0 0 / 34px 34px,
        radial-gradient(circle at 42% 84%, rgba(0,0,0,0.04) 1px, transparent 2px) 0 0 / 44px 44px,
        linear-gradient(#ffffff, #ffffff);
      filter: saturate(0.9);
      animation: drift 18s linear infinite;
    }
    @keyframes drift{
      0%   { transform: translate3d(0,0,0); }
      100% { transform: translate3d(-40px, -60px, 0); }
    }

    .wrap{
      min-height: 100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      position:relative;
      z-index:1;
    }

    .card{
      width: min(var(--maxw), 100%);
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      overflow:hidden;
      position:relative;
    }

    header{
      padding: 14px 16px;
      border-bottom: 1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap:10px;
    }

    .headLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 0;
    }

    .dot{
      width:10px; height:10px;
      border-radius:50%;
      background: var(--accent);
      flex: 0 0 auto;
    }

    h1{
      font-size:14px;
      font-weight:700;
      margin:0;
      letter-spacing:.08em;
      color:var(--muted);
      white-space: nowrap;
    }

    #quota{
      font-size: 12px;
      color: #9a9a9a;
      letter-spacing: .08em;
      white-space: nowrap;
    }

    main{
      padding: 22px 18px 26px;
      text-align:center;
      position:relative;
      min-height: 520px; /* iPhone 13 Proの縦余白を“意図的”に使う */
    }

    .titleArea{
      margin-top: 18px;
    }

    .t1{
      font-size: clamp(20px, 5.8vw, 30px);
      font-weight: 700;
      letter-spacing: .06em;
      margin: 0 0 18px;
    }

    /* 98%ブロック */
    .t2{
      font-size: clamp(20px, 6.3vw, 34px);
      font-weight: 800;
      letter-spacing: .06em;
      margin: 0;
      line-height: 1.35;
      white-space: pre-line;
    }

    .tapHint{
      margin: 18px 0 0;
      font-size: 13px;
      color: rgba(0,0,0,0.28);
      letter-spacing: .14em;
      user-select:none;
    }
    .tapHint.blink{
      animation: hintBlink 1.25s ease-in-out infinite;
    }
    @keyframes hintBlink{
      0%,100%{ opacity: .25; }
      50%    { opacity: .9; }
    }

    /* キャラエリア */
    .hero{
      margin: 44px auto 0;
      width: min(260px, 70%);
      position: relative;
      display:flex;
      align-items:flex-end;
      justify-content:center;
    }

    /* “影”で下の空欄を埋める（高級感） */
    .heroShadow{
      position:absolute;
      left:50%;
      bottom: -18px;
      transform: translateX(-50%);
      width: 360px;
      height: 170px;
      background: radial-gradient(ellipse at center, rgba(0,0,0,0.12), transparent 66%);
      filter: blur(22px);
      opacity: .75;
      pointer-events:none;
      z-index:0;
    }

    img#deka{
      width: 100%;
      height:auto;
      display:block;
      position: relative;
      z-index:1;
      /* ゆっくり揺れ */
      transform-origin: 50% 100%;
      animation: bob 3.6s ease-in-out infinite;
      will-change: transform;
    }
    @keyframes bob{
      0%,100%{ transform: translateY(0px) rotate(-0.2deg); }
      50%    { transform: translateY(-6px) rotate(0.2deg); }
    }

    /* “瞬きっぽい”表現：ごく短時間だけ縦を潰す（自然寄り） */
    .blinkSim{
      animation: blinkSim 6.8s infinite;
    }
    @keyframes blinkSim{
      0%, 95%, 100% { filter:none; }
      96% { transform: translateY(-5px) scaleY(0.985) scaleX(1.002); }
      97% { transform: translateY(-5px) scaleY(0.92)  scaleX(1.01); }
      98% { transform: translateY(-5px) scaleY(0.985) scaleX(1.002); }
    }

    footer{
      border-top: 1px solid var(--line);
      padding: 14px 12px 18px;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      justify-content:center;
    }

    .startBtn{
      appearance:none;
      border: none;
      background:#111;
      color:#fff;
      border-radius: 28px;
      height: var(--btn-h);
      padding: 0 34px;
      font-size: 16px;
      letter-spacing: .12em;
      cursor:pointer;
      transition: transform .12s ease, opacity .2s ease;
      min-width: 210px;
    }
    .startBtn:active{
      transform: translateY(1px) scale(0.985);
      opacity:.92;
    }

    .note{
      font-size: 12px;
      color: rgba(0,0,0,0.34);
      letter-spacing: .06em;
      user-select:none;
      text-align:center;
      line-height: 1.7;
    }

    /* ====== フェード演出 ====== */
    .fadeLayer{
      position: fixed;
      inset: 0;
      background: #fff;
      opacity: 0;
      pointer-events: none;
      z-index: 9999;
      transition: opacity .35s ease;
    }
    .fadeLayer.on{
      opacity: 1;
      pointer-events: auto;
    }

    /* アニメ抑制設定 */
    @media (prefers-reduced-motion: reduce){
      .bgParticles, img#deka, .tapHint.blink{
        animation: none !important;
      }
      .fadeLayer{ transition:none; }
    }

    @media (max-width: 420px){
      main{ min-height: 480px; }
      .heroShadow{ width: 320px; }
      .startBtn{ min-width: 190px; }
    }
  </style>
</head>

<body>
  <div class="bgParticles" aria-hidden="true"></div>
  <div class="fadeLayer" id="fade"></div>

  <div class="wrap">
    <div class="card">
      <header>
        <div class="headLeft">
          <div class="dot"></div>
          <h1>デカブサ占い</h1>
        </div>
        <div id="quota">今日はあと3回</div>
      </header>

      <main>
        <div class="titleArea">
          <p class="t1">あなたの運勢はどう？</p>
          <p class="t2">98%の人が
外れたと回答</p>
          <div class="tapHint blink" id="tapHint">タップして</div>
        </div>

        <div class="hero">
          <div class="heroShadow"></div>
          <!-- 画像ファイル名は今まで通りでOK -->
          <img id="deka" class="blinkSim" src="dekabusa.png" alt="デカブサ">
        </div>
      </main>

      <footer>
        <button class="startBtn" id="btnStart" type="button">占ってみる</button>
        <div class="note">※当たったと思っても外れています</div>
      </footer>
    </div>
  </div>

  <script>
    // ===== 設定 =====
    const NEXT_URL = "game.html";   // 本編
    const FADE_MS  = 360;

    // 「タップして」でも開始できる（画面タップ）
    const btnStart = document.getElementById("btnStart");
    const fade = document.getElementById("fade");

    function goNext(){
      // 二重起動防止
      if (fade.classList.contains("on")) return;

      // フェード
      fade.classList.add("on");

      // 少し待って遷移
      setTimeout(() => {
        location.href = NEXT_URL;
      }, FADE_MS);
    }

    btnStart.addEventListener("click", (e) => {
      e.stopPropagation();
      goNext();
    });

    // 画面タップでも開始（シンプルに）
    document.addEventListener("click", (e) => {
      // ボタン押下は上で処理済み
      if (e.target === btnStart) return;
      goNext();
    }, { passive:true });
  </script>
</body>
</html>
